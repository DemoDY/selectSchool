<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.select.school.dao.mapper.ProblemMapper">
    <resultMap id="problemOption" type="com.select.school.model.dto.ProblemDTO">
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="title" jdbcType="VARCHAR" property="title"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>

        <collection property="optionList" ofType="com.select.school.model.dto.OptionDTO">
            <result column="id" property="id" jdbcType="INTEGER"/>
            <result column="problem_id" property="problemId" jdbcType="INTEGER"/>
            <result column="o_option" property="option" jdbcType="VARCHAR"/>
            <result column="o_number" property="number" jdbcType="VARCHAR"/>
            <result column="o_tl" property="tl" jdbcType="VARCHAR"/>
            <result column="o_description" property="description" jdbcType="VARCHAR"/>
        </collection>
    </resultMap>

    <select id="selectProblems" resultMap="problemOption">
        SELECT
	        p.*,
	        o.id,
			o.problem_id,
			o.o_option,
			o.o_number,
			o.o_description,
			o.o_tl
		from
		d_problem p LEFT JOIN d_option o
		on p.id = o.problem_id
    </select>
</mapper>